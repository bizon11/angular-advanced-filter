/*!
 * angular-ht-advanced-filter
 * https://github.com/hightest/angular-advanced-filter
 * Version: 0.0.1 - 2015-01-18T17:52:38.669Z
 * License: 
 */
angular.module("ht.advanced-filter",["ui.bootstrap"]).directive("htAdvancedFilter",function(){return{require:"^ngModel",scope:{htAdvancedFilter:"="},templateUrl:"advanced-filter.html",controller:["$scope","$filter",function(e,t){var l=e.htAdvancedFilter,n=l.data,i=l.filteredData;e.fields=[{name:"Wszędzie",value:"$"}],e.fields=e.fields.concat(l.fields),e.select=l.select,e.filters=angular.isDefined(l.filters)?l.filters:[],e.filterTypes=[{name:"Szukaj w",value:"filter"},{name:"Mniejszy od",value:"lessThanOrEqualTo"},{name:"Większy od",value:"greaterThanOrEqualTo"}],e.add=function(){e.filters.push({filter:e.filterTypes[0].value,field:"$",value:""})},e.$watch(function(){return n},function(e,t){e!=t&&f()});var r=function(e){var t={};return angular.forEach(e,function(e){e.value.length&&(angular.isUndefined(t[e.filter])&&(t[e.filter]={}),t[e.filter][e.field]=e.value)}),t},a=function(t){var l=e.select;return angular.forEach(l,function(e){if(angular.isDefined(e.selected)&&null!==e.selected){var l=e.selected.type,n=e.selected.field,i=e.selected.value;angular.isDefined(t[l])||(t[l]={}),t[l][n]=i}}),t},f=function(){var l=angular.copy(n),f=r(e.filters);f=a(f),angular.forEach(f,function(e,n){l=t(n)(l,e)}),angular.copy(l,i)};e.$watch("filters",function(e,t){t!=e&&f()},!0),e.$watch("select",function(e,t){t!=e&&f()},!0),e.remove=function(t){e.filters.splice(t,1)},f()}]}}).filter("greaterThanOrEqualTo",["filterFilter",function(e){return function(t,l){return e(t,l,function(e,t){var l=function(e){return!isNaN(parseFloat(e))};return l(e)&&l(t)?e>=t:!1})}}]).filter("lessThanOrEqualTo",["filterFilter",function(e){return function(t,l){return e(t,l,function(e,t){var l=function(e){return!isNaN(parseFloat(e))};return l(e)&&l(t)?t>=e:!1})}}]),angular.module("ht.advanced-filter").run(["$templateCache",function(e){e.put("advanced-filter.html",'<div><div class="form-inline" ng-repeat="filter in filters"><div class="form-group"><select class="form-control" ng-model="filter.filter" ng-options="filterType.value as filterType.name for filterType in filterTypes"></select></div><div class="form-group"><select class="form-control" ng-model="filter.field" ng-options="field.value as field.name for field in fields"></select></div><div class="form-group"><input class="form-control" type="text" ng-model="filter.value"></div><div class="form-group"><span class="glyphicon glyphicon-remove-circle" ng-click="remove($index)"></span></div></div><button type="button" class="btn btn-default" ng-click="add()">Dodaj filtr</button></div><h4 ng-repeat-start="field in select">{{field.name}}</h4><div class="btn-group" ng-repeat-end=""><label ng-repeat="option in field.options" class="btn btn-success" ng-model="field.selected" btn-radio="option" uncheckable="">{{option.name}}</label></div>')}]);